$(function(){
	alert('Test accounts');

    var Task = Backbone.Model.extend({
    	return this.id ? '/donuts/' + this.id : '/donuts';
    });

    var TaskCollection = Backbone.Collection.extend({
        model: Task,
        url: '/accounts'
    });
    var taskCollection = new TaskCollection();
    taskCollection.fetch();

	TasklistView = Backbone.View.extend({
		initialize: function(){
			this.render();
		},
		events: {
            "click input[type=button]": "addTask"
        },
        addTask: function( event ){
            // Button clicked, you can access the element that was clicked with event.currentTarget
            alert( "Create task " + $("#task_name").val() );
            var newTask = new Task({name:$("#task_name").val()});
            newTask.save();
        },
		render: function(){
			// Compile the template using underscore
			var template = _.template( $("#tasklist_template").html(), {} );
			this.el.html( template );
		}
	});
	
	var tasklistView = new TasklistView({ el: $("#tasklist_container") });
});